\chapter{Sensores de peso}
\section{\obj}
\capacidad
\begin{itemize}
\item Implementar un sistema de medición de peso utilizando el módulo HX711 con calibración multipunto
\end{itemize}

\section{\mat}
\begin{itemize}
\item 1 Arduino UNO R4 MINIMA
\item Celda de carga de \SI{1}{\kilogram}
\item 1 amplicador HX711
\item Pesas de referencia (500g, 1000g, 1500g)
\item Cable USB y computadora con Arduino IDE
\end{itemize}

\section{Actividad 1}
\subsection{\pro}
\begin{enumerate}
    \item Conecte el amplificador HX711 tal como se muestra en la Figura %\ref{fig:pes1}
    \item Copie el siguiente código en el IDE de Arduino (el codigo se puede encontrar en: \href{https://github.com/juanjorojash/instrumentacion_I/blob/master/code/L04/L04.ino}{GitHub})
    \lstinputlisting[language=Arduino,numbers=none]{../code/L04/L04.ino}  
    \item Analice cada linea de código y cuando entienda su funcionamiento corra el \emph{sketch} usando el botón \emph{Upload}
    \item En la terminal serial ingrese la letra "c", esto iniciará un proceso de calibración, siga las instrucciones del menú, calibre con peso máximo de 200 gramos.
    \item Copie el siguiente código en su IDE de Python. (el codigo se puede encontrar en: \href{https://github.com/juanjorojash/instrumentacion_I/blob/master/code/L04/L04.py}{GitHub})
    \lstinputlisting[language=Python,numbers=none]{../code/L04/L04.py}
    \item Modifique el puerto COM para que coincida con el puerto en el que esta conectado el Arduino UNO R4 MINIMA.
    \item Coloque un peso de 100 gramos y realice una toma de datos de 20 muestras.
    \item Coloque un peso de 300 gramos y realice una toma de datos de 20 muestras.
    \item Repita este procedimiento para calibraciones con peso máximo de 500 gramos y 900 gramos. 
\end{enumerate}

% \begin{figure}[H]
%     \tikzset{comm/.style={muxdemux, muxdemux def={Lh=5, Rh=5, NL=2, NB=0, NR=0, w=2}}}
%     \tikzset{BMP280/.style={muxdemux, muxdemux def={Lh=5, Rh=5, NL=0, NB=0, NR=6, w=2}}}
%     \centering
%     \begin{circuitikz} 
%         \draw (0,3.5) node[comm] (m){\rotatebox{90}{\small communication}}
%         (0,0) node[comm] (p){\rotatebox{90}{\small power}}
%         ;
%         \draw (m.blpin 1) node[above left]{\small SDA};
%         \draw (m.blpin 2) node[above left]{\small SCL};
%         \draw (p.blpin 1) node[above left]{\small GND};
%         \draw (p.blpin 2) node[above left]{\small +3V3};
%         \draw (-5,-3) node[BMP280,rotate=90] (s){\rotatebox{-90}{\small BMP280}}
%         (s.brpin 1) node[above right,rotate=90]{\scriptsize SDO}
%         (s.brpin 2) node[above right,rotate=90]{\scriptsize CSB}
%         (s.brpin 3) node[above right,rotate=90]{\scriptsize SDA}
%         (s.brpin 4) node[above right,rotate=90]{\scriptsize SCL}
%         (s.brpin 5) node[above right,rotate=90]{\scriptsize GND}
%         (s.brpin 6) node[above right,rotate=90]{\scriptsize VCC}
%         ;
%         \draw[blue]
%         (p.blpin 2)
%         -|
%         (s.brpin 6)
%         (p.blpin 2)
%         -|
%         (s.brpin 1)
%         ;
%         \draw[green]
%         (p.blpin 1)
%         -|
%         (s.brpin 5)
%         ;
%         \draw[red]
%         (m.blpin 2)
%         -| 
%         (s.brpin 4)
%         ;
%         \draw[brown]
%         (m.blpin 1)
%         -| 
%         (s.brpin 3)
%         ;
%         \draw[dashed,blue]
%         (-2.5,6) -- (1,6)node[midway, below]{UNO R4 MINIMA} -- (1,-1.5) -- (-2.5,-1.5) -- cycle;
%     \end{circuitikz}
%     \caption{Conexión de sensor de presión absoluta BMP280}
%     \label{fig:pes1}
% \end{figure}

\subsection{Análisis}
\begin{enumerate}
    \item ¿Cuál es la resolución teórica del módulo HX711 si trabaja con un convertidor de 24 bits y una celda de carga de \SI{1}{\kilogram}? ¿Qué implicaciones tiene esto en la medición de masas pequeñas? Como recomendación, utilizar la siguiente ecuación:
    \begin{equation*}
        \text{Resolución} = \frac{\text{Capacidad de la celda}}{2^{\text{Número de bits}}}
    \end{equation*} 
    \item ¿Observó alguna diferencia entre las mediciones realizadas con diferentes puntos de calibración?¿Cuál fue mejor?
\end{enumerate}